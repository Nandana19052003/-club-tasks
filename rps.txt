import random

def check_result(player_choice, computer_choice):
    if player_choice == computer_choice:
        return "It's a tie!"
    elif (player_choice == "rock" and computer_choice == "scissors") or (player_choice == "scissors" and computer_choice == "paper") or (player_choice == "paper" and computer_choice == "rock"):
        return "You win!"
    else:
        return "You lose!"


@bot.message_handler(commands=['start', 'help'])
def display_instructions(message):
    bot.reply_to(message, "Welcome to the rock-paper-scissors game! Type /play to start a game.")

@bot.message_handler(commands=['play'])
def start_game(message):
    bot.reply_to(message, "Enter rock, paper, or scissors.")
    bot.register_next_step_handler(message, process_choice)

def process_choice(message):
    player_choice = message.text.lower()
    options = ["rock", "paper", "scissors"]
    if player_choice in options:
        computer_choice = random.choice(options)
        result = check_result(player_choice, computer_choice)
        bot.reply_to(message, f"You chose {player_choice} and the computer chose {computer_choice}. {result}")
    else:
        bot.reply_to(message, "Invalid choice. Please enter rock, paper, or scissors.")
        bot.register_next_step_handler(message, process_choice)

bot.polling()
